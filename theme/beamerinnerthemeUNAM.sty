% Copyright 2007 by Till Tantau
% Copyright 2015 by Vedran Mileti\'c, Joseph Wright
% Copyright 2020 by Vero Arriola
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\DeclareOptionBeamer{shadow}[true]{\def\beamer@themerounded@shadow{#1}}
\ExecuteOptionsBeamer{shadow=false}
\ProcessOptionsBeamer

\mode<presentation>

% Title page: UNAM

\defbeamertemplate*{title page}{UNAM}[1][]
{
  \vbox{}
  \vfill
  \begingroup
    \centering
    
    \leavevmode%
    \setbox\beamer@tempbox=\hbox{\begin{minipage}[b]{0.8\paperwidth}%
          \vbox{}\vskip-.75ex%
          \centering\leavevmode
          \usebeamercolor[fg]{frametitle}\usebeamerfont{title}\strut\inserttitle\strut\par%
          \ifx\insertsubtitle\@empty\else%
            {\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertsubtitle}\strut\par\vbox{}\vskip-1.0ex}%
          \fi%
          \vskip1.0ex
          \nointerlineskip
          \vbox{}%
          \end{minipage}}%
      \beamer@tempdim=\ht\beamer@tempbox%
      \advance\beamer@tempdim by 4pt%
      \begin{pgfpicture}{0pt}{0pt}{0.8\paperwidth}{\beamer@tempdim}
        \usebeamercolor{frametitle right}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{0.8\paperwidth}{\beamer@tempdim}}
        \pgfusepath{clip}
        \pgftext[left,base]{\pgfuseshading{beamer@frametitleshade}}
        \pgftext[left,base]{\pgfuseshading{beamer@topshade}}
      \end{pgfpicture}
      \hskip-0.81\paperwidth%
      \box\beamer@tempbox%
  
  
    \vskip1em\par
    \begin{beamercolorbox}[sep=8pt,center,#1]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center,#1]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center,#1]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip0.5em
    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
  \endgroup
  

        
  \vfill
}

% Section page: UNAM

\defbeamertemplate*{section page}{UNAM}[1][]
{
  \vbox{}
  \vfill
  \begingroup
    \centering
    
    \leavevmode%
    \setbox\beamer@tempbox=\hbox{\begin{minipage}[b]{\paperwidth}%
          \vbox{}\vskip-.75ex%
          \centering\leavevmode
          \usebeamercolor[fg]{frametitle}\usebeamerfont{title}\strut\hspace{2.5cm}\insertsection\strut\par%
          \vskip1.0ex
          \nointerlineskip
          \vbox{}%
          \end{minipage}}%
      \beamer@tempdim=\ht\beamer@tempbox%
      \advance\beamer@tempdim by 4pt%
      \begin{pgfpicture}{0pt}{0pt}{0.8\paperwidth}{\beamer@tempdim}
        \usebeamercolor{frametitle right}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{0.8\paperwidth}{\beamer@tempdim}}
        \pgfusepath{clip}
        \pgftext[left,base]{\pgfuseshading{beamer@frametitleshade}}
        \pgftext[left,base]{\pgfuseshading{beamer@topshade}}
      \end{pgfpicture}
      \hskip-\paperwidth%
      \box\beamer@tempbox%
      
      \begin{beamercolorbox}[sep=8pt,center,#1]{author}
       
      \end{beamercolorbox}

  \endgroup
  
  \tableofcontents[
    sectionstyle=show/shaded,
    subsectionstyle=hide,
    subsubsectionstyle=hide,
    ]

  \vfill
}


\setbeamertemplate{blocks}[rounded][shadow=\beamer@themerounded@shadow]
\setbeamertemplate{items}[ball]
\setbeamertemplate{sections/subsections in toc}[ball]
\setbeamertemplate{title page}[UNAM][colsep=-4bp,rounded=false,shadow=\beamer@themerounded@shadow]
\setbeamertemplate{part page}[default][colsep=-4bp,rounded=true,shadow=\beamer@themerounded@shadow]
\setbeamertemplate{section page}[UNAM][colsep=-4bp,rounded=false,shadow=\beamer@themerounded@shadow]
\setbeamertemplate{subsection page}[default][colsep=-4bp,rounded=true,shadow=\beamer@themerounded@shadow]
  
\mode<all>
